### 带有删除操作的并查集

那么当这个结点被删除，我们就给它另外一个键值，再从原来的集合中减去。将它添加到新的集合。

```C++
#include<bits/stdc++.h>

const int maxn=200004;
using namespace std;

int fa[maxn];
int cnt[maxn];
int sum[maxn];
int tot;
int id[maxn];
map<int,int>mp;
int n,m;
void init()
{
	for(int i=0;i<=n+m;i++){
		fa[i]=i;
		sum[i]=i;
		cnt[i]=1;
		id[i]=i;
	}
	tot=n+1;
	mp.clear();
}

int get(int x)
{
	if(x==fa[x])return x;
	else {
		int t=fa[x];
		fa[x]=get(fa[x]);
		return fa[x];
	}
}

void unit(int a,int b)
{
	int x=get(id[a]),y=get(id[b]);
	if(x==y){
		return ;
	}else {
		fa[x]=y;
		sum[y]+=sum[x];
		cnt[y]+=cnt[x];
		sum[x]=0;
		cnt[x]=0;
	}
}
void move(int a,int b)
{
	int r1=get(id[a]),r2=get(id[b]);
	id[a]=tot++;
	int r=get(id[a]);
	sum[r1]-=a;
	cnt[r1]--;
	fa[r]=r2;
	sum[r2]+=a;
	cnt[r2]++;
}

int main()
{
	while(~scanf("%d%d",&n,&m))
	{
		init();
		for(int i=0;i<m;i++){
		int t;
		scanf("%d",&t);
		if(t==3){
			int a;scanf("%d",&a);
			a=id[a];
			a=get(a);
			cout<<cnt[a]<<" "<<sum[a]<<endl;
		}else{
			int a,b;
			scanf("%d%d",&a,&b);
				if(t==1){
					unit(a,b);
				}else {
					move(a,b);
				}
			}	
		}	
	}
	
}
```

