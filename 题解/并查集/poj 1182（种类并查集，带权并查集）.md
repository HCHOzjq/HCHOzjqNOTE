### 种类并查集



```C++
#include<stdio.h>


using namespace std;

int fa[150005];

int get(int x)
{
	if(x==fa[x])return x;
	else return fa[x]=get(fa[x]);
}

void unit(int a,int b)
{
	int x=get(a),y=get(b);
	if(x!=y){
		fa[x]=y;
	}
}

int main()
{
	int n,k;
	scanf("%d%d",&n,&k);
	for(int i=0;i<=3*n;i++){
		fa[i]=i;
	}
	int ans=0;
	for(int i=1;i<=k;i++)
	{
		int a,b,c;
		scanf("%d%d%d",&a,&b,&c);
		if(b<=0||c<=0||b>n||c>n){
			ans++;continue;
		}
		
		if(a==1)
		{
			if(get(b)==get(c+n)||get(b)==get(c+2*n)){
				ans++;
				continue;
			} else {
				unit(b,c);unit(b+n,c+n);unit(b+2*n,c+2*n);
			}
		}else 
		{
			if(get(b)==get(c)||get(b)==get(c+2*n)){
				ans++;
				continue;
			} else {
				unit(b,c+n);unit(b+n,c+2*n);unit(b+2*n,c);
			}
		}
	}
	printf("%d\n",ans);	
	
	
}
```

### 带权并查集

