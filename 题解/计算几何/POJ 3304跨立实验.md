### POJ 3304 

判断有没有一条线段与所有线段相交，用跨立实验

AB相交于CD：有`xmual(AD,CD)*xmul(BD,CD)<=0`

题目需要枚举每一条线段，去进行判断。

```C++
#include<iostream>
#include<cmath>
#include<cstdio>
using namespace std;

const int maxn=500;


struct point 
{
	double x1,y1;
	double x2,y2;
}p[maxn];

struct node
{
	double x,y;
}no[maxn];

double sig(double x,double y,double a,double b){
	return x*b-y*a;
}
int n;

bool sgn(double len)
{
	if(fabs(len)<1e-8)return 0;
	
	return 1;
}
bool ok(double x,double y,double a,double b)
{
	if(sgn(sqrt((a-x)*(a-x)+(y-b)*(y-b)))==0)return false;
	for(int i=0;i<n;i++){
		if((sig(p[i].x1-x,p[i].y1-y,a-x,b-y)*sig(p[i].x2-x,p[i].y2-y,a-x,b-y))<=0)continue;
		else return false;
	}
	return true;
}

int main()
{
	int t;
	cin>>t;
	while(t--)
	{
		cin>>n;
		int cnt=0;
		for(int i=0;i<n;i++){
			double x,y,x1,y1;
			
			cin>>x>>y>>x1>>y1;
			p[i].y1=y;
			p[i].x1=x;
			p[i].x2=x1;
			p[i].y2=y1;
			no[cnt].y=y;
			no[cnt++].x=x;
			no[cnt].x=x1;
			no[cnt++].y=y1;
		}
		
		int o=0;
		for(int i=0;i<cnt;i++)
		{
			for(int j=0;j<cnt;j++)
			if(i!=j&&ok(no[i].x,no[i].y,no[j].x,no[j].y)){
				o=1;
				break;
			}
			if(o)break;
		}
		if(o)cout<<"Yes!"<<endl;
		else cout<<"No!"<<endl;
		
	}
}
```

