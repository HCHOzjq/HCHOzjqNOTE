### 函数open和openat

- 作用：两者都是打开或创建一个文件。
- `int open(const char* path,int oflag,...);`
- `int openat(int fd,const char*path,int oflag,...);`
- oflag写的是读写执行权限

- 当path参数指定的绝对路径名的时候，fd会被忽略。
- 当path参数指定的相对路径名的时候，fd参数指出了相对路径名在文件系统中的开始地址，fd参数是通过打开相对路径名所在的目录来获取。
- path参数指定了相对路径名，fd参数具有特殊值AT_FDCWD。在这种情况下，路径名在当前工作目录中获取。

open换句话说是在相对路径上打开一个文件。

- openat的作用：1-让线程可以使用相对路径名打开目录中的文件。2-可以避免time-of-check-to-time-of-use（TOCTTOU）即：两个基于文件的函数调用，第二个调用依赖第一个调用的结果，那么程序就是脆弱的。因为两个操作不是原子操作，之间文件改变了会造成第一个调用的结果不再有效，使得程序最终结果错误。

### 函数creat

`int creat(const char* path,mode_t mode);`

- 该函数等同于：`open(path,O_WRONLY|O_CREAT|O_TRUNC,mode);`

- 以只写打开。如果需要写完后读可以用`open(path,O_RDWR|O_CREAT|O_TRUNC,mode);`

### 函数close

`int close(int fd)`

- 关闭一个文件会释放该进程加在该文件上的所有记录锁。
- 当一个进程终止时，内核会自动关闭所打开的文件，因此很多程序都没显式close。